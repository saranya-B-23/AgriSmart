{% extends "layout.html" %}

{% block content %}
<div class="history-section">
    <h2 class="section-title">ğŸ•’ Prediction History</h2>

    {% if predictions %}
        {% for item in predictions %}
            <div class="history-card">
                <!-- Top Summary -->
                <p><strong>ğŸ“… Date:</strong> {{ item['timestamp'].strftime('%Y-%m-%d %A %I:%M %p') }}</p>
                <p><strong>ğŸŒ¾ Recommended Crop:</strong> {{ item['result']['crop'] }}</p>
                <p><strong>ğŸ’§ Water Requirement:</strong> {{ item['result']['water'] }}</p>
                <p><strong>ğŸ§ª Fertilizer & Pesticide:</strong> {{ item['result']['combined'] }}</p>

                <!-- Input & Detection Details -->
                <details>
                    <summary>ğŸ“Š Full Input & Detection Details</summary>
                    <ul>
                        <li><strong>ğŸ™ï¸ City:</strong> {{ item['inputs']['city'] }}</li>
                        <li><strong>ğŸŒ¡ï¸ Temperature:</strong> {{ item['inputs']['temperature'] }} Â°C</li>
                        <li><strong>ğŸ’§ Humidity:</strong> {{ item['inputs']['humidity'] }} %</li>
                        <li><strong>ğŸŒ§ï¸ Rainfall:</strong> {{ item['inputs']['rainfall'] }} mm</li>
                        <li><strong>ğŸŒ¿ Nitrogen (N):</strong> {{ item['inputs']['N'] }}</li>
                        <li><strong>ğŸŒ¿ Phosphorus (P):</strong> {{ item['inputs']['P'] }}</li>
                        <li><strong>ğŸŒ¿ Potassium (K):</strong> {{ item['inputs']['K'] }}</li>
                        <li><strong>ğŸ§ª pH:</strong> {{ item['inputs']['ph'] }}</li>
                    </ul>
                </details>
            </div>
        {% endfor %}
    {% else %}
        <p>No prediction history available.</p>
    {% endif %}
</div>
{% endblock %}
